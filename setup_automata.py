from autolang import DFA, NFA, PDA, TM

'''
Initialise many automata for testing
- taken from Sipser
'''




# DFAs

# {w | w contains at least one '1' and the final '1' is followed by an even number of '0's}
tran1 = {
    ('q1', '0'): 'q1',
    ('q1', '1'): 'q2',
    ('q2', '0'): 'q3',
    ('q2', '1'): 'q2',
    ('q3', '0'): 'q2',
    ('q3', '1'): 'q2'
}
dfa1 = DFA(tran1, 'q1', ['q2'])

# {w | w ends with a '1'}
tran2 = {
    ('q1', '0'): 'q1',
    ('q1', '1'): 'q2',
    ('q2', '0'): 'q1',
    ('q2', '1'): 'q2'
}
dfa2 = DFA(tran2, 'q1', ['q2'])

# {w | w is the empty string or w ends with a '0'}
tran3 = {
    ('q0', '0'): 'q0',
    ('q0', '1'): 'q1',
    ('q1', '0'): 'q0',
    ('q1', '1'): 'q1'
}
dfa3 = DFA(tran3, 'q0', ['q0'])

# {w | w starts and ends with the same letter}
tran4 = {
    ('s', 'a'): 'q1',
    ('s', 'b'): 'r1',
    ('q1', 'a'): 'q1',
    ('q1', 'b'): 'q2',
    ('q2', 'a'): 'q1',
    ('q2', 'b'): 'q2',
    ('r1', 'a'): 'r2',
    ('r1', 'b'): 'r1',
    ('r2', 'a'): 'r2',
    ('r2', 'b'): 'r1'
}
dfa4 = DFA(tran4, 's', {'q1', 'r1'})

# NFAs

# {w | w contains '101' or '11' as a subword}
tran1 = {
    ('q1', '0'): ('q1',),
    ('q1', '1'): ('q1', 'q2'),
    ('q2', ''): ('q3',),
    ('q2', '0'): ('q3',),
    ('q3', '1'): ('q4',),
    ('q4', '0'): ('q4',),
    ('q4', '1'): ('q4',) 
}
nfa1 = NFA(tran1, 'q1', ['q4'])

# {w ∈ {0,1}* | third position from the end is 1}
tran2 = {
    ('q1', '0'): ('q1',),
    ('q1', '1'): ('q1', 'q2'),
    ('q2', '0'): ('q3',),
    ('q2', '1'): ('q3',),
    ('q3', '0'): ('q4',),
    ('q3', '1'): ('q4',),
}
nfa2 = NFA(tran2, 'q1', ['q4'])

# {0^k | k is a multiple of 2 or 3}
tran3 = {
    ('q0', ''): ('q1', 'q3'),
    ('q1', '0'): ('q2',),
    ('q2', '0'): ('q1',),
    ('q3', '0'): ('q4',),
    ('q4', '0'): ('q5',),
    ('q5', '0'): ('q3',)
}
nfa3 = NFA(tran3, 'q0', ['q1', 'q3'])

# Sipser p53, language not given
tran4 = {
    ('q1', ''): ('q3',),
    ('q1', 'b'): ('q2',),
    ('q2', 'a'): ('q2', 'q3'),
    ('q2', 'b'): ('q3',),
    ('q3', 'a'): ('q1',)
}
nfa4 = NFA(tran4, 'q1', ['q1'])

# PDAs

# {0^n 1^n | n >= 0}
tran1 = {
    ('q1', '', ''): (('q2', '$'),),
    ('q2', '0', ''): (('q2', '0'),),
    ('q2', '1', '0'): (('q3', ''),),
    ('q3', '1', '0'): (('q3', ''),),
    ('q3', '', '$'): (('q4', ''),)
}
pda1 = PDA(tran1, 'q1', ['q1', 'q4'])

# {a^i b^j c^k | i,j,k >= 0 and i = j or i = k}
tran2 = {
    ('q1', '', ''): (('q2', '$'),),
    ('q2', 'a', ''): (('q2', 'a'),),
    ('q2', '', ''): (('q3', ''), ('q5', '')),
    ('q3', '', '$'): (('q4', ''),),
    ('q3', 'b', 'a'): (('q3', ''),),
    ('q4', 'c', ''): (('q4', ''),),
    ('q5', '', ''): (('q6', ''),),
    ('q5', 'b', ''): (('q5', ''),),
    ('q6', '', '$'): (('q7', ''),),
    ('q6', 'c', 'a'): (('q6', ''),)
}
pda2 = PDA(tran2, 'q1', ['q4', 'q7'])

# {w w^R | w ∈ {0, 1}* where w^R reverses the letters of w}
tran3 = {
    ('q1', '', ''): (('q2', '$'),),
    ('q2', '0', ''): (('q2', '0'),),
    ('q2', '1', ''): (('q2', '1'),),
    ('q2', '', ''): (('q3', ''),),
    ('q3', '0', '0'): (('q3', ''),),
    ('q3', '1', '1'): (('q3', ''),),
    ('q3', '', '$'): (('q4', ''),)
}
pda3 = PDA(tran3, 'q1', ['q4'])

# TMs

# {w#w | w ∈ {0, 1}*}
tran1 = {
    ('q1', '#'): ('q8', '#', 'R'),
    ('q1', '0'): ('q2', 'x', 'R'),
    ('q1', '1'): ('q3', 'x', 'R'),
    ('q1', '_'): ('qr', '_', 'R'),
    ('q1', 'x'): ('qr', 'x', 'R'),
    ('q2', '#'): ('q4', '#', 'R'),
    ('q2', '0'): ('q2', '0', 'R'),
    ('q2', '1'): ('q2', '1', 'R'),
    ('q3', '#'): ('q5', '#', 'R'),
    ('q3', '0'): ('q3', '0', 'R'),
    ('q3', '1'): ('q3', '1', 'R'),
    ('q4', '0'): ('q6', 'x', 'L'),
    ('q4', 'x'): ('q4', 'x', 'R'),
    ('q5', '1'): ('q6', 'x', 'L'),
    ('q5', 'x'): ('q5', 'x', 'R'),
    ('q6', '#'): ('q7', '#', 'L'),
    ('q6', '0'): ('q6', '0', 'L'),
    ('q6', '1'): ('q6', '1', 'L'),
    ('q6', 'x'): ('q6', 'x', 'L'),
    ('q7', '0'): ('q7', '0', 'L'),
    ('q7', '1'): ('q7', '1', 'L'),
    ('q7', 'x'): ('q1', 'x', 'R'),
    ('q8', '_'): ('qa', '_', 'R'),
    ('q8', 'x'): ('q8', '0', 'R'),
}
tm1 = TM(tran1, 'q1', 'qa', 'qr', reserved_letters={'x', '_'})

# {0^(2^n) | n >= 0}
tran2 = {
    ('q1', '_'): ('qr', '_', 'R'),
    ('q1', 'x'): ('qr', 'x', 'R'),
    ('q1', '0'): ('q2', '_', 'R'),
    ('q2', '_'): ('qa', '_', 'R'),
    ('q2', 'x'): ('q2', 'x', 'R'),
    ('q2', '0'): ('q3', 'x', 'R'),
    ('q3', '_'): ('q5', '_', 'L'),
    ('q3', 'x'): ('q3', 'x', 'R'),
    ('q3', '0'): ('q4', '0', 'R'),
    ('q4', '_'): ('qr', '_', 'R'),
    ('q4', 'x'): ('q4', 'x', 'R'),
    ('q4', '0'): ('q3', 'x', 'R'),
    ('q5', '_'): ('q2', '_', 'R'),
    ('q5', 'x'): ('q5', 'x', 'L'),
    ('q5', '0'): ('q5', '0', 'L')
}
tm2 = TM(tran2, 'q1', 'qa', 'qr', {'x'})